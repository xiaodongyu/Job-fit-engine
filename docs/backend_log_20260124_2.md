# Backend Log — 2026-01-24 (Session 2)

Summary of work completed **since the latest commit** (`4b67bba`: chore: env.template use placeholder only; add reminder not to commit API keys). This session focused on **renames, move of QA/test scripts, test_results layout, QA report provenance, and documentation**.

---

## 1. Folder renames (test_fixtures)

| Before | After |
|--------|--------|
| `quant_cross_functional_role_fit_benchmark/` | `resume_cross_functional_role/` |
| `senior_us_mixed_jds_pdf_bundle/` | `jd_senior_us_mixed_roles/` |

- **Manifests:** `resume_bundle_zip` → `resume_cross_functional_role.zip`; `jd_bundle_zip` → `jd_senior_us_mixed_roles.zip` in `qa_manifest_mapping`, `qa_manifest_resume_jd_pairings`, and two-phase manifests.
- **Scripts:** `qa_helpers.py` uses `BENCHMARK_DIR` → `resume_cross_functional_role`, `JDS_DIR` → `jd_senior_us_mixed_roles`.
- **Docs:** All references updated in `batch-qa-testing-plan.md`, `backend_log_20260124_1.md`, `backend-revise-cluster-percentage-derivation-plan.md`, `backend-gt-role-percentage-implementation-plan.md`, fixture READMEs, and bundle `readme.md` files.

---

## 2. Doc renames (docs & test_fixtures)

| Before | After |
|--------|--------|
| `gt-role-percentage-implementation-plan.md` | `backend-gt-role-percentage-implementation-plan.md` |
| `revise-cluster-percentage-derivation.md` | `backend-revise-cluster-percentage-derivation-plan.md` |
| `testing-offline.md` | `test_on_single_resume_jd.md` |

- **Location:** First two live in `docs/`; `test_on_single_resume_jd.md` in `test_fixtures/`.
- **Refactors:** `backend_log_20260124_1.md`, `README.md`, `test_fixtures/README.md`, `batch-qa-testing-plan.md`, and any cross-links updated.

---

## 3. QA/test scripts: `scripts/` → `tests/`

All QA and test-related scripts were moved from **`scripts/`** to **`tests/`**:

| Script | Role |
|--------|------|
| `qa_helpers.py` | Shared helpers (path resolution, API client, cluster distribution, L1/delta). |
| `run_qa.py` | Batch QA runner (phases 1–5); writes `test_results/qa_report.*`. |
| `test_resume_only_clustering.py` | CLI: upload resume → cluster → print assignment & %. |
| `test_run_resume_only_clustering.py` | Pytest wrapper that subprocess-runs the CLI (renamed from pytest `test_resume_only_clustering` to avoid clash). |
| `test_single_resume_jd_match.py` | Single resume–JD match with debug (prompts, chunks, results). |
| `test-offline.sh` | Bash: upload → poll → analyze/fit (no cluster). |

- **Path / imports:** `_SCRIPTS` → `_TESTS`; `sys.path` and `PROJECT_ROOT` logic updated. Docstrings and usage now say `python tests/...` or `./tests/test-offline.sh`.
- **Docs:** All references to `scripts/` (runner commands, file paths, “Files Touched”) updated to `tests/` in `backend_log_20260124_1`, `batch-qa-testing-plan`, `backend-revise`, `backend-gt`, `README`, `test_fixtures/README`, `single-qa-test-plan`, `test_on_single_resume_jd`.
- **Removed:** `scripts/` directory (and its `__pycache__`).

---

## 4. `test_results/` and QA report default output

- **New folder:** `test_results/`.
- **Moved:** `qa_report.json` and `qa_report.md` from project root into `test_results/`.
- **`run_qa.py`:** Default `--output-dir` changed from `"."` to `test_results`. Reports are written to `test_results/qa_report.json` and `test_results/qa_report.md` unless `-o DIR` is used.
- **Docs:** `batch-qa-testing-plan`, `test_fixtures/README`, and `backend_log_20260124_1` updated to describe default output location.

---

## 5. QA report provenance

- **`qa_report.json`:** Added top-level `"_generated_by": "tests/run_qa.py"` (JSON has no comments; this documents the producer).
- **`qa_report.md`:** Added **Generated by:** `tests/run_qa.py` after the main heading.

Both files now explicitly state they are produced by `tests/run_qa.py`.

---

## 6. `tests/README.md`

- **New file:** `tests/README.md`.
- **Contents:** Overview of the `tests/` folder; for each script, a short “What it does,” usage, and **corresponding .md** (e.g. `run_qa` → `batch-qa-testing-plan`, `test-offline` → `test_on_single_resume_jd`). Section on `qa_helpers`; outputs table (who writes `qa_report.*`); quick-reference table (goal → script → doc). Links to `test_fixtures/README` for fixture layout and test-method comparison.

---

## 7. `test_fixtures/README.md` updates

- **Layout:** Split into “Root-level files” and “Subfolders (structured QA)” with a table describing each subfolder (e.g. `resume_cross_functional_role`, `jd_senior_us_mixed_roles`, QA manifests).
- **Test methods:** Descriptions and comparison of `single-qa-test-plan`, `test_on_single_resume_jd`, and `batch-qa-testing-plan`, with a comparison table (audience, fixtures, main path, pass/fail, automation).
- **Quick start:** Commands for ad-hoc, smoke QA, and batch QA; all references use `tests/` and `test_results/` as applicable.

---

## 8. Other touched files

- **`frontend/src/useCareerFit.ts`:** `uploadId` included in hook return (fixes TS “declared but never read”).
- **`test_fixtures/single-qa-test-plan.md`:** “See also” example uses `./tests/test-offline.sh`.
- **`README.md`:** Testing-with-local-files example uses `./tests/test-offline.sh`.

---

## 9. Files / areas touched (summary)

| Area | Files |
|------|--------|
| Fixture renames | `test_fixtures/resume_cross_functional_role/`, `jd_senior_us_mixed_roles/` (new); manifests; `qa_helpers`, batch-qa, docs |
| Doc renames | `backend-gt-*`, `backend-revise-*`, `test_on_single_resume_jd`; `backend_log_20260124_1`, READMEs |
| Scripts → tests | `tests/qa_helpers`, `run_qa`, `test_*`, `test-offline`; remove `scripts/`; update all refs |
| test_results | New folder; move `qa_report.*`; `run_qa` default `-o`; batch-qa, READMEs |
| QA report provenance | `tests/run_qa.py` (`write_report`) |
| New docs | `tests/README.md` |
| test_fixtures README | Layout, test methods, comparison, quick start |

---

## 10. Reference

- **Session 1 log:** [backend_log_20260124_1.md](backend_log_20260124_1.md) (cluster %, QA phases, match-by-cluster, debug, single resume–JD test).
- **Test methods and fixtures:** [test_fixtures/README.md](../test_fixtures/README.md).
- **Tests and QA scripts:** [tests/README.md](../tests/README.md).
